---
title: API Getting Started Guide
description: Getting started with the Teleport API
---

# Getting Started

In this getting started guide we will use the Teleport API Go Client to connect to the Teleport Auth server.

Here are the steps we'll walk through:
 1. Create an API user
 2. Generate credentials
 3. Create a Go program to demo the client

## Prerequisites

- Install [Go](https://golang.org/doc/install) (=teleport.golang=)+ and Setup Go Dev Environment
- Set up Teleport with the [Getting Started Guide](../../getting-started.mdx)

## 1/3 Create a User

Create a new user for the client to impersonate. 

```bash
# Run this directly on your auth server
# Add user and login via web proxy
sudo tctl users add api-user --roles=admin
```

<Admonition type="note">
  It is generally best practice to create custom roles for each client user. See [API authorization](./architecture.mdx#authorization).
</Admonition>

## 2/3 Generate Client Credentials

Login as the newly created user with `tsh`.

```bash
# generate tsh profile
sudo tsh login --user=api-user --proxy=tele.example.com:443
```

The [profile Credentials loader](https://pkg.go.dev/github.com/gravitational/teleport/api/client#LoadProfile)
will automatically retrieve Credentials from the current profile in the next step.

## Step 3/3 Create a go project

Set up a new [Go module](https://golang.org/doc/tutorial/create-module) and import the `client` package: 

```bash
mkdir client-demo && cd client-demo
go mod init client-demo
go get github.com/gravitational/teleport/api/client
```

Create a file `main.go` with the following command, modifying the `Addrs` strings as needed:

```bash
cat > main.go << 'EOF'
package main

import (
	"context"
	"log"

	"github.com/gravitational/teleport/api/client"
)

func main() {
	ctx := context.Background()

	clt, err := client.New(ctx, client.Config{
        Addrs: []string{
            "tele.example.com:443",
            "tele.example.com:3025",
            "tele.example.com:3024",
            "tele.example.com:3080",
        },
		Credentials: []client.Credentials{
			client.LoadProfile("", ""),
		},
	})

	if err != nil {
		log.Fatalf("failed to create client: %v", err)
	}

	defer clt.Close()

	resp, err := clt.Ping(ctx)

	if err != nil {
		log.Fatalf("failed to ping server: %v", err)
	}
	
	log.Printf("Example success!")
	log.Printf("Example server response: %s", resp)
	log.Printf("Server version: %s", resp.ServerVersion)
	log.Printf("Learn more about the client pkg.go at https://pkg.go.dev/github.com/gravitational/teleport/api/client")
}
EOF
```

Now you can run the program which will connect the client to the Teleport Auth server and fetch the server version.

```bash
go run main.go
```

## Next Steps

- Read about Teleport [API architecture](./architecture.mdx) for a more in depth look at the API client.
- Review the `client` [pkg.go reference documentation](https://pkg.go.dev/github.com/gravitational/teleport/api/client) for more information about working with the Teleport API programmatically.
- Familiarize yourself with the [admin manual](../../admin-guide.mdx) to make the best use of the API.